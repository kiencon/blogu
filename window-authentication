<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="DESCRIPTION" height="651px" preserveAspectRatio="none" style="width:902px;height:651px;background:#FFFFFF;" version="1.1" viewBox="0 0 902 651" width="902px" zoomAndPan="magnify"><title>Windows Authentication (Integrated) - High-level Flow</title><defs/><g><g class="title" data-source-line="1"><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="432.2158" x="228.2758" y="22.9951">Windows Authentication (Integrated) - High-level Flow</text></g><!--entity U--><g class="entity" data-qualified-name="U" data-source-line="3" id="ent0002"><ellipse cx="434.3651" cy="51.2969" fill="#F1F1F1" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M434.3651,59.2969 L434.3651,86.2969 M421.3651,67.2969 L447.3651,67.2969 M434.3651,86.2969 L421.3651,101.2969 M434.3651,86.2969 L447.3651,101.2969" fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31.9102" x="418.41" y="115.792">User</text></g><!--entity PC--><g class="entity" data-qualified-name="PC" data-source-line="4" id="ent0003"><polygon fill="#F1F1F1" points="358.8,221.0969,368.8,211.0969,509.925,211.0969,509.925,263.6906,499.925,273.6906,358.8,273.6906,358.8,221.0969" style="stroke:#181818;stroke-width:0.5;"/><line style="stroke:#181818;stroke-width:0.5;" x1="499.925" x2="509.925" y1="221.0969" y2="211.0969"/><line style="stroke:#181818;stroke-width:0.5;" x1="358.8" x2="499.925" y1="221.0969" y2="221.0969"/><line style="stroke:#181818;stroke-width:0.5;" x1="499.925" x2="499.925" y1="221.0969" y2="273.6906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="85.4697" x="373.8" y="244.092">Windows PC</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="111.125" x="373.8" y="260.3889">(domain-joined)</text></g><!--entity AD--><g class="entity" data-qualified-name="AD" data-source-line="5" id="ent0004"><polygon fill="#F1F1F1" points="71.95,581.8469,81.95,571.8469,224.784,571.8469,224.784,624.4406,214.784,634.4406,71.95,634.4406,71.95,581.8469" style="stroke:#181818;stroke-width:0.5;"/><line style="stroke:#181818;stroke-width:0.5;" x1="214.784" x2="224.784" y1="581.8469" y2="571.8469"/><line style="stroke:#181818;stroke-width:0.5;" x1="71.95" x2="214.784" y1="581.8469" y2="581.8469"/><line style="stroke:#181818;stroke-width:0.5;" x1="214.784" x2="214.784" y1="581.8469" y2="634.4406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="112.834" x="86.95" y="604.842">Active Directory</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="65.9326" x="86.95" y="621.1389">(KDC/DC)</text></g><!--entity API--><g class="entity" data-qualified-name="API" data-source-line="6" id="ent0005"><polygon fill="#F1F1F1" points="333.93,375.6869,343.93,365.6869,534.7864,365.6869,534.7864,450.8744,524.7864,460.8744,333.93,460.8744,333.93,375.6869" style="stroke:#181818;stroke-width:0.5;"/><line style="stroke:#181818;stroke-width:0.5;" x1="524.7864" x2="534.7864" y1="375.6869" y2="365.6869"/><line style="stroke:#181818;stroke-width:0.5;" x1="333.93" x2="524.7864" y1="375.6869" y2="375.6869"/><line style="stroke:#181818;stroke-width:0.5;" x1="524.7864" x2="524.7864" y1="375.6869" y2="460.8744"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="80.8008" x="348.93" y="398.682">Internal API</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="96.3867" x="348.93" y="414.9789">ASP.NET Core</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="81.6211" x="348.93" y="431.2757">(IIS/Kestrel)</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="160.8564" x="348.93" y="447.5726">Windows Auth enabled</text></g><!--entity DB--><g class="entity" data-qualified-name="DB" data-source-line="7" id="ent0006"><path d="M403.17,590.4969 C403.17,580.4969 448.3648,580.4969 448.3648,580.4969 C448.3648,580.4969 493.5596,580.4969 493.5596,590.4969 L493.5596,615.7938 C493.5596,625.7938 448.3648,625.7938 448.3648,625.7938 C448.3648,625.7938 403.17,625.7938 403.17,615.7938 L403.17,590.4969" fill="#F1F1F1" style="stroke:#181818;stroke-width:0.5;"/><path d="M403.17,590.4969 C403.17,600.4969 448.3648,600.4969 448.3648,600.4969 C448.3648,600.4969 493.5596,600.4969 493.5596,590.4969" fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="70.3896" x="413.17" y="617.492">Oracle DB</text></g><g class="entity" data-qualified-name="GMN8" data-source-line="11" id="ent0009"><path d="M544.54,222.2569 L544.54,238.3869 L510.15,242.3869 L544.54,246.3869 L544.54,262.5225 A0,0 0 0 0 544.54,262.5225 L806.1796,262.5225 A0,0 0 0 0 806.1796,262.5225 L806.1796,232.2569 L796.1796,222.2569 L544.54,222.2569 A0,0 0 0 0 544.54,222.2569" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M796.1796,222.2569 L796.1796,232.2569 L806.1796,232.2569 L796.1796,222.2569" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="240.6396" x="550.54" y="239.3238">User already has a Windows session.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="183.3838" x="550.54" y="254.4566">No extra login form needed.</text></g><g class="entity" data-qualified-name="GMN18" data-source-line="25" id="ent0019"><path d="M542.95,567.8769 L542.95,638.4081 L895.7674,638.4081 L895.7674,577.8769 L885.7674,567.8769 L542.95,567.8769" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M885.7674,567.8769 L885.7674,577.8769 L895.7674,577.8769 L885.7674,567.8769" fill="#FEFFDD" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="60.5566" x="548.95" y="584.9438">Key idea:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="181.7017" x="548.95" y="600.0766">- API is intranet-only (WAN).</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="236.3423" x="548.95" y="615.2094">- Auth is based on Windows session.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="331.8174" x="548.95" y="630.3422">- Authorization can map AD groups to permissions.</text></g><!--link U to PC--><g class="link" data-entity-1="ent0002" data-entity-2="ent0003" data-link-type="dependency" data-source-line="9" id="lnk7"><path d="M434.36,119.3269 C434.36,147.1269 434.36,178.5969 434.36,204.6569" fill="none" id="U-to-PC" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="434.36,210.6569,438.36,201.6569,434.36,205.6569,430.36,201.6569,434.36,210.6569" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="179.8862" x="435.36" y="162.1638">Log in with domain account</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="100.1851" x="475.2106" y="177.2966">(user@domain)</text></g><!--link PC to API--><g class="link" data-entity-1="ent0003" data-entity-2="ent0005" data-link-type="dependency" data-source-line="15" id="lnk11"><path d="M358.4,270.3369 C344.43,278.8169 331.66,289.7369 323.36,303.6869 C309.86,326.3969 318.3306,343.81 339.6406,361.38" fill="none" id="PC-to-API" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="344.27,365.1969,339.8705,356.3853,340.4122,362.0161,334.7813,362.5578,344.27,365.1969" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="95.583" x="364.474" y="316.7538">HTTPS request</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="175.811" x="324.36" y="331.8866">Authorization: Negotiate ...</text></g><!--link API to PC--><g class="link" data-entity-1="ent0005" data-entity-2="ent0003" data-link-type="dependency" data-source-line="22" id="lnk17"><path d="M486.73,365.3569 C493.93,356.2769 500.26,346.2669 504.36,335.6869 C509.51,322.4269 510.29,316.6169 504.36,303.6869 C499.22,292.4569 495.2631,286.5801 486.0531,278.1801" fill="none" id="API-to-PC" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="481.62,274.1369,485.5742,283.1571,485.3143,277.5062,490.9651,277.2463,481.62,274.1369" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="106.5771" x="510.36" y="324.2538">Response (data)</text></g><!--link API to AD--><g class="link" data-entity-1="ent0005" data-entity-2="ent0004" data-link-type="dependency" data-source-line="16" id="lnk12"><path d="M333.44,418.5369 C223.67,425.5369 58.56,443.7869 19.36,490.8769 C6,506.9269 8.37,520.1169 19.36,537.8769 C31.35,557.2369 45.6793,568.4058 66.1793,578.0358" fill="none" id="API-to-AD" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="71.61,580.5869,65.1647,573.1398,67.0845,578.461,61.7633,580.3807,71.61,580.5869" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="160.894" x="44.4525" y="511.4438">Validate / obtain identity</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="209.0791" x="20.36" y="526.5766">automatically via Windows Auth</text></g><!--link AD to API--><g class="link" data-entity-1="ent0004" data-entity-2="ent0005" data-link-type="dependency" data-source-line="17" id="lnk13"><path d="M189.31,571.3569 C226.54,543.5369 278.83,504.8469 300.36,490.8769 C315.76,480.8869 327.325,473.7761 343.605,464.2961" fill="none" id="AD-to-API" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="348.79,461.2769,338.9997,462.3491,344.4692,463.7929,343.0254,469.2624,348.79,461.2769" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="119.7422" x="301.36" y="511.4438">Identity confirmed</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91.5776" x="315.4423" y="526.5766">(user, groups)</text></g><!--link API to API--><g class="link" data-entity-1="ent0005" data-entity-2="ent0005" data-link-type="dependency" data-source-line="19" id="lnk14"><path d="M535.06,396.4269 C555.32,398.2969 569.79,403.9169 569.79,413.2769 C569.79,422.6469 561.2946,427.7154 541.0346,429.5854" fill="none" id="API-to-API" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="535.06,430.1369,544.3895,433.2928,540.0388,429.6773,543.6543,425.3266,535.06,430.1369" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="129.2637" x="621.655" y="410.3438">Authorization check</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="220.9937" x="575.79" y="425.4766">(AD Groups -&gt; Roles/Permissions)</text></g><!--link API to DB--><g class="link" data-entity-1="ent0005" data-entity-2="ent0006" data-link-type="dependency" data-source-line="20" id="lnk15"><path d="M429.86,461.1169 C428.48,484.2969 428.08,512.6569 431.36,537.8769 C433.22,552.1769 435.589,562.092 439.289,574.372" fill="none" id="API-to-DB" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="441.02,580.1169,442.2535,570.3456,439.5775,575.3295,434.5936,572.6535,441.02,580.1169" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="110.7031" x="450.4127" y="503.9438">Query/Command</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="146.8086" x="432.36" y="519.0766">(using service account</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="141.6606" x="434.934" y="534.2094">or delegated identity)</text></g><!--link DB to API--><g class="link" data-entity-1="ent0006" data-entity-2="ent0005" data-link-type="dependency" data-source-line="21" id="lnk16"><path d="M493.94,581.8469 C532.07,564.6469 580.69,542.1169 583.36,537.8769 C594.52,520.2169 594.24,508.7069 583.36,490.8769 C571.92,472.1269 559.4873,460.74 540.2773,449.83" fill="none" id="DB-to-API" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="535.06,446.8669,540.9106,454.7897,539.4077,449.3361,544.8613,447.8333,535.06,446.8669" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="72.2363" x="593.36" y="518.9438">Data result</text></g><!--link API to GMN18--><g class="link" data-entity-1="ent0005" data-entity-2="ent0019" data-link-type="association" data-source-line="25" id="lnk20"><path d="M535.11,426.3969 C582.34,436.6869 636.44,455.7069 674.36,490.8769 C696.06,510.9969 707.53,543.0269 713.45,567.5669" fill="none" id="API-GMN18" style="stroke:#181818;stroke-width:1;stroke-dasharray:7,7;"/></g><?plantuml-src PL8zazem4EtrAtQkmZEnwIao0Jl9USWGvu2xXaPOYr4YQuaaGyYlpyhcS2vffTstxoleO11Uj5LqyJ3lmX5jqBKCcYnCIXkmSJAWIY25HzqSKuDdDF39q4K8MGToyB3rw1v0UjWAImhXuHMkodTsegYLsgRVILk6wUUg_3OuhuC-8nJQOOIwylYooAT5FipDYzjSvE6iD32lofsThwjizN43EJdaZR9SJvVeWqEJxEpVKW2jt1jK0rXL2YM3t4lFY5-Th5buiUZ_YeKGMqZJzqmDPl256j0MBfeX1leWwvew6_XSnse_3Ay9qmi8Zdq9G8UeAte1qZYKwWf7XfPtSprwpwvcOaM0luAJOAXXw0Ev5YoYGfK9j0eYg13C919YsipeSREfrk3mPyT2sG4MHqx_xcEQmGeR2ffZWYpBHDpeDmjUV9P6g_Wp1Tg7g4Ihc71WhsKNM4PCsvWhdBLyqmF1-oE1yhO5DTc3TYsgcnNle77KdNmYniFznXkEK1-n_i4h3FgvdmSUV2A3VbgXQtLl3OEyOXGBXlZMeRjESsfRQOTxsZRieplh6iT8k8CA3JQnftTvYM28aKt1oRD_lZFXVgFF-WdzYIyZJ68vM4KVwPu2UnCpZRLPuZNYofb8UpZjkHuSeCMGacNl9Y_pLPB5tzWw_eubKy2w_mi__TSOQQ6LfvZMO2G4WjDeoLY9Fm00?></g></svg>
